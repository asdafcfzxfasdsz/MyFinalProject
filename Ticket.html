<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Ticket Booking</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ===== Same as Travel: active nav pop effect + clickable user ===== */
        .nav-links a.active{
            display: inline-block;
            transform: translateY(-6px) scale(1.15);
            font-weight: 700;
            animation: navPop 450ms ease-out;
            transition: transform 220ms ease, font-weight 220ms ease;
        }
        @keyframes navPop{
            0%{ transform: translateY(0) scale(1); }
            60%{ transform: translateY(-12px) scale(1.25); }
            100%{ transform: translateY(-6px) scale(1.15); }
        }
        .user-avatar{
            cursor: pointer;
            max-width: 140px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* ‰∏∫ËæìÂÖ•Ê°ÜÂíåÊó•ÊúüÈÄâÊã©Âô®Ê∑ªÂä†Âü∫Êú¨Ê†∑ÂºèÔºà‰∏çÂΩ±Âìç train/plane/bus ‰∏â‰∏™ÊåâÈíÆÁöÑÈªòËÆ§Ê†∑ÂºèÔºâ */
        .ticket-input {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            width: 100%;
            box-sizing: border-box;
            margin: 5px 0;
        }

        .ticket-input:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
        }

        .form-row {
            margin: 15px 0;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        /* Swap button (does not affect train/plane/bus buttons) */
        .swap-btn{
            width: 44px;
            height: 44px;
            border-radius: 999px;
            border: 1px solid rgba(0,0,0,0.15);
            background: #fff;
            cursor: pointer;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size: 18px;
            transition: transform 180ms ease, box-shadow 180ms ease;
            flex: 0 0 auto;
        }
        .swap-btn:hover{
            transform: translateY(-1px);
            box-shadow: 0 8px 18px rgba(0,0,0,0.08);
        }

        /* Result panel */
        .result-panel{
            margin-top: 14px;
            background: #fff;
            padding: 14px 14px;
            border-radius: 14px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            font-size: 14px;
            color: rgba(0,0,0,0.75);
            line-height: 1.45;
            display: none;
        }
        .result-title{
            font-weight: 900;
            margin-bottom: 6px;
            color: rgba(0,0,0,0.85);
        }
        .result-price{
            font-size: 18px;
            font-weight: 900;
            margin-top: 6px;
            color: rgba(0,0,0,0.9);
        }

        /* ===== Requirement update: selected train/plane/bus button becomes bigger + highlighted ===== */
        /* NOTE: This only affects the selected state (.active). Default color/size/position remains from your CSS. */
        .ticket-tabs .tab-btn.active{
            transform: scale(1.12);
            box-shadow: 0 10px 22px rgba(0,0,0,0.14);
            outline: 3px solid rgba(76, 175, 80, 0.35);
            outline-offset: 2px;
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <ul class="nav-links">
            <li><a href="Travel.html">Travel</a></li>
            <li><a href="AI Chat.html">AI Chat</a></li>
            <li><a href="Food.html">Food</a></li>
            <li><a href="Guide.html">Guide</a></li>
            <li><a href="Ticket.html" class="active">Ticket</a></li>
            <li><a href="Upload.html">Upload</a></li>
        </ul>
        <div class="nav-right">
            <div class="search-bar">
                <span>üîç</span>
                <input type="text" placeholder="Search anything">
            </div>
            <div class="user-avatar" id="userAvatar" title="Click to go to Login">User</div>
            <span>üè∑Ô∏è</span>
        </div>
    </nav>

    <section class="hero-section">
        <a href="details.html?id=t1&topic=travel" class="hero-card">
            <img src="image\1.png" alt="Moscow">
            <div class="hero-text">
                <h3>Red Square In Moscow</h3>
                <p>Ah, The Joy Of The Open Road...</p>
            </div>
        </a>
        <a href="details.html?id=t2&topic=travel" class="hero-card">
            <img src="image\2.png" alt="Night View">
            <div class="hero-text">
                <h3>My Travel To Moscow</h3>
                <p>Download Torrents From Verified...</p>
            </div>
        </a>
        <a href="details.html?id=t3&topic=travel" class="hero-card">
            <img src="image\3.png" alt="Couple">
            <div class="hero-text">
                <h3>We Are In Moscow</h3>
                <p>A Single Monitor Manifesto...</p>
            </div>
        </a>
    </section>

    <div class="content-container">
        <div class="ticket-tabs">
            <!-- IMPORTANT: Default style/size/position unchanged. Only selected adds .active effect. -->
            <button class="tab-btn active" data-mode="train" aria-pressed="true">train</button>
            <button class="tab-btn" data-mode="plane" aria-pressed="false">plane</button>
            <button class="tab-btn" data-mode="bus" aria-pressed="false">bus</button>
        </div>

        <div class="ticket-form">
            <div class="form-row">
                <div class="input-group">
                    <input type="text" class="ticket-input" placeholder="Departure point" id="departure">
                    <button type="button" class="swap-btn" id="swapBtn" title="Swap">‚áÑ</button>
                    <input type="text" class="ticket-input" placeholder="Destination" id="destination">
                </div>
            </div>

            <div class="form-row">
                <input type="date" class="ticket-input" id="travel-date">
            </div>

            <button id="searchBtn" style="width: 100%; background: var(--button-blue); color: white; padding: 20px; border: none; border-radius: 50px; font-size: 24px; cursor: pointer;">
                Search
            </button>

            <div class="result-panel" id="resultPanel">
                <div class="result-title" id="resultTitle">Result</div>
                <div id="resultText"></div>
                <div class="result-price" id="resultPrice"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            /* ===== user avatar: same as Travel ===== */
            const userAvatar = document.getElementById('userAvatar');
            function getCurrentUserPhone(){
                const candidates = [
                    localStorage.getItem('travelAgentCurrentUser'),
                    localStorage.getItem('travelAgentCurrentPhone'),
                    localStorage.getItem('currentUserPhone'),
                    localStorage.getItem('travelAgentLastUser')
                ].filter(Boolean);

                if (candidates.length > 0) return candidates[0];

                try{
                    const users = JSON.parse(localStorage.getItem('travelAgentUsers') || '{}');
                    const keys = Object.keys(users);
                    if (keys.length === 1) return keys[0];
                }catch(e){}
                return '';
            }
            const phone = getCurrentUserPhone();
            userAvatar.textContent = phone ? phone : 'User';
            userAvatar.addEventListener('click', function(){ window.location.href = 'index.html'; });

            /* ===== default date today ===== */
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('travel-date').value = formattedDate;

            /* ===== train/plane/bus selectable (adds .active only; no base style changes) ===== */
            let currentMode = 'train';
            const tabBtns = Array.from(document.querySelectorAll('.ticket-tabs .tab-btn'));

            // Ensure currentMode matches the initial active button
            const initialActive = tabBtns.find(b => b.classList.contains('active'));
            if (initialActive && initialActive.dataset.mode) currentMode = initialActive.dataset.mode;

            tabBtns.forEach(btn => {
                btn.addEventListener('click', function(){
                    tabBtns.forEach(b => {
                        b.classList.remove('active');
                        b.setAttribute('aria-pressed', 'false');
                    });

                    btn.classList.add('active');
                    btn.setAttribute('aria-pressed', 'true');

                    currentMode = btn.dataset.mode || 'train';
                });
            });

            /* ===== swap departure/destination ===== */
            document.getElementById('swapBtn').addEventListener('click', function(){
                const depEl = document.getElementById('departure');
                const dstEl = document.getElementById('destination');
                const temp = depEl.value;
                depEl.value = dstEl.value;
                dstEl.value = temp;
            });

            /* ===== show price or "Feature under development." ===== */
            function normalizeCity(s){ return (s || '').trim().toLowerCase(); }
            function pairKey(a, b){ return normalizeCity(a) + '->' + normalizeCity(b); }

            // Demo prices (extend anytime). If not found -> "Feature under development."
            const PRICE_TABLE = {
                train: {
                    "beijing->shanghai": 89,
                    "shanghai->beijing": 89,
                    "new york->boston": 49,
                    "paris->london": 75
                },
                plane: {
                    "beijing->shanghai": 199,
                    "shanghai->beijing": 199,
                    "new york->los angeles": 299,
                    "paris->berlin": 159
                },
                bus: {
                    "beijing->tianjin": 12,
                    "tianjin->beijing": 12,
                    "berlin->prague": 25,
                    "paris->brussels": 19
                }
            };

            function getPrice(mode, from, to){
                const key = pairKey(from, to);
                const m = PRICE_TABLE[mode] || {};
                if (typeof m[key] === 'number') return m[key];
                return null;
            }

            const resultPanel = document.getElementById('resultPanel');
            const resultTitle = document.getElementById('resultTitle');
            const resultText = document.getElementById('resultText');
            const resultPrice = document.getElementById('resultPrice');

            document.getElementById('searchBtn').addEventListener('click', function() {
                const departure = document.getElementById('departure').value.trim();
                const destination = document.getElementById('destination').value.trim();
                const date = document.getElementById('travel-date').value;

                if (!departure || !destination || !date) {
                    alert('Please fill in all fields');
                    return;
                }

                resultPanel.style.display = 'block';
                resultTitle.textContent = `${String(currentMode).toUpperCase()} Ticket`;
                resultText.textContent = `From ${departure} to ${destination} on ${date}.`;

                const price = getPrice(currentMode, departure, destination);
                if (price === null){
                    resultPrice.textContent = 'Feature under development.';
                } else {
                    resultPrice.textContent = `Estimated price: $${price}`;
                }
            });
        });
    </script>
</body>
</html>
